
<% formatArray = { 
                   'Unspecified' => 999,
                   'Legacy' => 500,
                   'EDH' => 100,
                   'Pauper' => 50,
                   'PDH' => 60,
                   'Standard' => 200,
                   'Modern' => 300,
                   'Draft' => 900}
%>
<% currentFormat = "NoFormat" %>


<% if @user.nil? %>
No user with such an id or name.
<% else %>
<% if current_user == @user %>
	<h1> Your profile </h1>
<% else%>	
	<h1>Profile for	<%= @user.name %></h1>
<%end%>


<div class="container">

	<% @user.decks.sort_by{ |a|  [formatToInt(a.format), updatedAt(a)] }.reverse.each do |t| %>
                <% if currentFormat != t.format %>
                        <%  currentFormat = t.format  %>
                        </table>
                        <h4><a name="<%= t.format %>"> <%= t.format %>  Decks </a></h4>
                        <table class="table table-condensed">
                        <tr>
                        <th>Name</th><th>Latest Revisions</th><th>Last Update</th><th>Format</th>
                        </tr>
                <% end %>
		<tr>
			<td><%= makeDeckLink(t) %></td>
			<td>
				<% t.revs.last(5).each do |s| %>
					<% if !s.physical %>
						<%= link_to s.rev_nr,   deck_path(t)+'/revs/'+revNr(s).to_s, :class => 'btn btn-primary' %>
					<% else %>
						<%= link_to s.rev_nr,     deck_path(t)+'/revs/'+revNr(s).to_s, :class => 'btn btn-warning' %>
					<% end %>
				<% end %>

			</td>
			<td><%= time_ago_in_words(updatedAt(t)) %></td>
			<td> <%= t.format %> </td>
	</tr>
	<% end %>
	</table>

</div>
<% end %>
